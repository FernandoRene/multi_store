<!DOCTYPE html>
<html>
<head>
  <base href="$FLUTTER_BASE_HREF">
  <meta charset="UTF-8">
  <title>Inventario Multi-tienda</title>
  <style>body{margin:0;background:#1976d2;display:flex;justify-content:center;align-items:center;height:100vh;color:white;font-family:Roboto}.loading{text-align:center}.spinner{width:40px;height:40px;border:4px solid rgba(255,255,255,0.3);border-radius:50%;border-top-color:white;animation:spin 1s infinite;margin:20px auto}@keyframes spin{to{transform:rotate(360deg)}}</style>
</head>
<body>
  <div class="loading">
    <h1>📊 Inventario Multi-tienda</h1>
    <div class="spinner"></div>
    <p id="status">Inicializando...</p>
  </div>
  <script>
    function updateStatus(msg){document.getElementById('status').textContent=msg}
    window.sqlJsConfig={locateFile:file=>'https://cdn.jsdelivr.net/npm/sql.js@1.8.0/dist/'+file};
    updateStatus('Configurando sql.js...');
  </script>
  <script src="https://cdn.jsdelivr.net/npm/sql.js@1.8.0/dist/sql-wasm.js" onload="updateStatus('sql.js listo')" onerror="updateStatus('Error sql.js')"></script>
  <script src="flutter.js" defer></script>
  <script>
    window.addEventListener('load',function(){
      updateStatus('Iniciando Flutter...');
      _flutter.loader.load({
        serviceWorkerSettings:{serviceWorkerVersion:"{{flutter_service_worker_version}}"},
        onEntrypointLoaded:function(engineInitializer){
          updateStatus('Cargando aplicación...');
          engineInitializer.initializeEngine().then(function(appRunner){
            updateStatus('¡Listo!');
            appRunner.runApp()
          }).catch(function(error){updateStatus('Error: '+error.message)})
        }
      }).catch(function(error){updateStatus('Error Flutter: '+error.message)})
    });
  </script>
</body>
</html>
